# Фильтрация активностей

По умолчанию в трассировку попадают следующий события:

- Входящие запросы Http
- Исходящие запросы Http, с использованием HttpClient
- Запросы к БД Postgres
- Запросы к БД Mssql

Вы можете натроить параметры фильтрации через конфигурацию вашего приложения.

## Фильтрация источников трассировки

Добавьте в секцию `Tracing` узел `SourceFilter`.

```
"Tracing": {
    . . .
    "SourceFilter": {
        "Include": [ "*" ],
        "Exclude": [ "*SqlClient*" ]
    }
}
```

Параметр `Include` позволяет ограничить трассировку только теми источниками, которые указаны в списке. Для источника адреса используйте имя или маску пути.

Параметр `Exclude` позволяет исключить из трассировки источники, которые указаны в списке.  Для источника адреса используйте имя или маску пути.

Если `Include` не задан, то разрешены все источники, за исключнием источников, указанных в `Exclude`.

Разрешается изменять данную настройку во время работы приложения.


## Фильтрация входящих запросов

Добавьте в секцию `Tracing` узел `RequestIn`.

```
"Tracing": {
    . . .
    "RequestIn": {
        "UrlFilter": {
            "Include": [
                "/api/product/*"
            ],
            "Exclude": [
                "/swagger*"
            ]
        }
    }
}
```

Параметр `Include` позволяет ограничить трассировку только теми маршрутами, которые указаны в списке. Для указания маршрута используйте путь или маску пути.

Параметр `Exclude` позволяет исключить из трассировки маршруты, которые указаны в списке. Для указания маршрута используйте путь или маску пути.

Если `Include` не задан, то разрешены все запросы, за исключнием маршрутов, указанных в `Exclude`.

Разрешается изменять данную настройку во время работы приложения.

## Фильтрация исходящих запросов

Добавьте в секцию `Tracing` узел `RequestOut`.

```
"Tracing": {
    . . .
    "RequestOut": {
        "UrlFilter": {
            "Include": [
                "https://my.site/*"
            ],
            "Exclude": [
                "https://external/restricted/*"
            ]
        }
    }
}
```

Параметр `Include` позволяет ограничить трассировку только теми адресами, которые указаны в списке. Для указания адреса используйте путь или маску пути.

Параметр `Exclude` позволяет исключить из трассировки маршруты, которые указаны в списке. Для указания адреса используйте путь или маску пути.

Если `Include` не задан, то разрешены все запросы, за исключнием адресов, указанных в `Exclude`.

Разрешается изменять данную настройку во время работы приложения.


## Фильтрация запросов к БД Mssql

Добавьте в секцию `Tracing` узел `Mssql`.

```
"Tracing": {
    . . .
    "Mssql": {
        "CommandFilter": {
            "Include": [
                "."
            ],
            "Exclude": [
                "\\sdbo\\.Users\\s"
            ]
        }
    }
}
```

Параметр `Include` позволяет ограничить трассировку только теми командами, которые удовлетворяют заданному regexp.

Параметр `Exclude` позволяет исключить из трассировки маршруты, которые удовлетворяют заданному regexp.

Если `Include` не задан, то разрешены все команды, за исключнием указанных в `Exclude`.

Разрешается изменять данную настройку во время работы приложения.
